<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= pageTitle %></title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
    <h1><%= pageTitle %></h1>

    <a href="/" class="btn btn-edit" style="margin-bottom: 20px;">
        ← Retour à la liste des idées
    </a>

    <section>
        <h2>Détails de l'Idée</h2>
        <p><strong>Idée:</strong> <%= idea.title %></p>
        <p><strong>Description:</strong> <%= idea.description %></p>
        <p><strong>Catégorie:</strong> <%= idea.category %></p>
    </section>

    <section>
        <% if (channelStats && channelStats.subscriberCount) { %>
            <h2>Tableau de Bord YT pour <%= channelStats.title %></h2>

            <div class="dashboard-grid">
                <div class="stat-card stat-channel">
                    <img src="<%= channelStats.thumbnail %>" alt="Vignette de la chaîne" class="channel-thumbnail">
                    <h3><%= channelStats.title %></h3>
                    <a href="https://www.youtube.com/channel/<%= channelId %>" target="_blank" style="margin-left: auto;" class="btn btn-edit">
                        Voir la chaîne
                    </a>
                </div>

                <div class="stat-card stat-subscribers">
                    <h4>Abonnés</h4>
                    <p class="stat-number"><%= new Intl.NumberFormat('fr-FR').format(channelStats.subscriberCount) %></p>
                </div>
                
                <div class="stat-card stat-views">
                    <h4>Vues Totales</h4>
                    <p class="stat-number"><%= new Intl.NumberFormat('fr-FR').format(channelStats.viewCount) %></p>
                </div>

                <div class="stat-card stat-videos">
                    <h4>Vidéos Publiées</h4>
                    <p class="stat-number"><%= new Intl.NumberFormat('fr-FR').format(channelStats.videoCount) %></p>
                </div>
            </div>
        <% } else { %>
             <h2>Tableau de Bord YT</h2>
             <p>Impossible de récupérer les statistiques de la chaîne (ID: <code><%= channelId %></code>). Vérifiez que la chaîne existe et que votre clé API est valide.</p>
        <% } %>
    </section>
    
    <section>
        <h3>Dernières Vidéos de la Chaîne</h3>
        <% if (recentVideos && recentVideos.length > 0) { %>
            <div class="recent-videos-list">
                <% recentVideos.forEach(video => { %>
                    <div class="video-item video-dashboard">
                        <a href="https://www.youtube.com/watch?v=<%= video.videoId %>" target="_blank">
                            <img src="<%= video.thumbnail %>" alt="<%= video.title %>">
                            <p><%= video.title %></p>
                        </a>
                    </div>
                <% }); %>
            </div>
        <% } else { %>
            <p>Aucune vidéo récente trouvée.</p>
        <% } %>
    </section>

</body>
</html>