<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= pageTitle %></title>
    <link rel="stylesheet" href="/css/style.css">
    <style>
        /* Style pour le bouton Mode Sombre dans les pages d'auth */
        #dark-mode-toggle {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1.5em;
            color: var(--text-color);
            margin-left: auto; /* Pousse le bouton √† droite */
            transition: color 0.3s;
        }
        #dark-mode-toggle:hover {
            color: var(--primary-color);
        }
    </style>
</head>
<body class="light-mode">
    <div class="auth-container">
        
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
            <h2 style="margin: 0;">Inscription</h2>
            <button id="dark-mode-toggle" aria-label="Activer le mode sombre">üåô</button>
        </div>

        <% if (error) { %>
            <p class="error-message"><%= error %></p>
        <% } %>

        <p style="text-align: center;">
            <a href="/auth/google" class="btn btn-secondary" style="background-color: #db4437; color: white;">
                S'inscrire avec Google
            </a>
        </p>
        <p style="text-align: center; margin: 15px 0;">OU</p>

        <form action="/register" method="POST">
            <div>
                <label for="username">Choisir un nom d'utilisateur :</label>
                <input type="text" id="username" name="username" required>
            </div>
            <div>
                <label for="password">Choisir un mot de passe :</label>
                <input type="password" id="password" name="password" required>
            </div>
            <button type="submit" class="btn-primary" style="width: 100%;">Cr√©er un Compte Local</button>
        </form>
        
        <p style="margin-top: 20px; text-align: center;">
            D√©j√† inscrit ? 
            <a href="/login" style="font-weight: bold;">Se connecter</a>
        </p>
    </div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const toggle = document.getElementById('dark-mode-toggle');
        const body = document.body;
        const currentTheme = localStorage.getItem('theme');
        
        if (currentTheme) {
            body.classList.remove('light-mode', 'dark-mode');
            body.classList.add(currentTheme);
            toggle.textContent = currentTheme === 'dark-mode' ? '‚òÄÔ∏è' : 'üåô';
        } else {
            body.classList.add('light-mode');
            toggle.textContent = 'üåô';
        }

        if(toggle) {
            toggle.addEventListener('click', () => {
                const newTheme = body.classList.contains('light-mode') ? 'dark-mode' : 'light-mode';
                body.classList.remove('light-mode', 'dark-mode');
                body.classList.add(newTheme);
                localStorage.setItem('theme', newTheme);
                toggle.textContent = newTheme === 'dark-mode' ? '‚òÄÔ∏è' : 'üåô';
            });
        }
    });
</script>
</body>
</html>